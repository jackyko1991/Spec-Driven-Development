# 沙盒開發指南

[English](sandbox-development.md)

本指南詳細介紹了可用於此開發環境的不同沙盒策略。沙盒是一種關鍵實踐，可確保新功能、錯誤修復和實驗在隔離的環境中進行開發，而不會影響主程式碼庫的穩定性。

## 策略比較

| 策略 | 最適用於 | 開銷 | 隔離性 | 主要特點 |
| :--- | :--- | :--- | :--- | :--- |
| **Git Checkout** | 大多數開發任務 | 低 | 高 | 使用臨時分支進行所有變更。 |
| **目錄複製** | 小型的、隔離的實驗 | 中 | 高 | 創建所需文件的最小副本。 |
| **Git Worktree** | 複雜的並行開發 | 高 | 非常高 | 允許多個分支同時被檢出。 |

## 統一沙盒位置

所有沙盒方法都使用位於專案根目錄的統一 `.sandbox/` 目錄進行任何基於文件的操作。此目錄被 Git 忽略（透過 `.gitignore`），以防止臨時開發產物被提交到儲存庫中。

## 沙盒策略

### 1. Git Checkout

*   **描述：** 這是一種輕量級且強烈推薦的方法，它利用了 Git 的分支功能。為每個任務從目前的基礎分支創建一個新的臨時分支。所有變更都提交到此分支，保持主分支的整潔。
*   **最適用於：** 大多數開發任務，包括新功能和錯誤修復。它以最小的開銷提供了出色的隔離性。
*   **工作流程：**
    1.  創建一個新分支（例如 `feature/user-auth` 或 `fix/login-bug`）。
    2.  所有開發和提交都在此分支上進行。
    3.  工作完成並驗證後，將該分支合併回主開發分支。

### 2. 目錄複製 (Directory Copy)

*   **描述：** 此方法涉及將特定任務所需的最小文件複製到 `.sandbox/` 內的子目錄中。這是在不依賴 Git 功能的情況下實現隔離的簡單方法。
*   **最適用於：** 小型的、隔離的實驗，或者當您需要在沒有完整應用程式開銷的情況下處理專案的子集時。
*   **工作流程：**
    1.  創建一個新目錄（例如 `.sandbox/2023-10-27-test-new-algorithm/`）。
    2.  僅將任務所需的文件複製到此目錄中。
    3.  在隔離的目錄中進行變更。
    4.  完成後，將修改後的文件手動複製回主專案。

### 3. Git Worktree

*   **描述：** 這是一項進階的 Git 功能，允許您將多個工作樹附加到同一個儲存庫。這意味著您可以在不同的目錄中同時檢出多個分支。
*   **最適用於：** 需要在多個功能或長期運行的分支上進行並行開發的複雜情境。它避免了在主要開發目錄中切換分支的需要。
*   **工作流程：**
    1.  創建一個新的工作樹並將其連結到一個新的或現有的分支。
    2.  工作樹在一個新目錄中創建，通常在 `.sandbox/` 內。
    3.  開發在隔離的工作樹中進行。
    4.  變更被提交並可以像往常一樣合併。

## 選擇策略

`steering-architect` 和 `strategic-planner` 代理將引導您為您的任務選擇適當的策略。由於其在功能和簡單性之間的平衡，`git checkout` 方法是大多數情況下的預設建議。